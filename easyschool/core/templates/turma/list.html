{% extends 'base.html' %}
{% block title %}Turmas — EasySchool{% endblock %}

{% block header_actions %}
<a href="{% url 'home' %}" class="btn btn-sm btn-outline-primary">Voltar</a>
{% endblock %}

{% block content %}
<div class="card shadow-sm alunos-card">
  <div class="card-body">
    <div class="d-flex align-items-center justify-content-between mb-4">
      <h1 class="h4 mb-0">Turmas</h1>
      <a href="{% url 'turma_create' %}" class="btn btn-primary">Nova Turma</a>
    </div>

    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th>Nome</th>
            <th>Série</th>
            <th>Turno</th>
            <th>Professor</th>
            <th class="text-end">Ações</th>
          </tr>
        </thead>
        <tbody>
          {% for turma in turmas %}
            <tr>
              <td>{{ turma.nome }}</td>
              <td>{{ turma.serie|default:"—" }}</td>
              <td>{{ turma.get_turno_display|default:"—" }}</td>
              <td>{% if turma.professor %}{{ turma.professor.nome }}{% else %}<span class="text-muted">—</span>{% endif %}</td>
              <td class="text-end">
                <div class="btn-group" role="group" aria-label="ações">
                  <a href="{% url 'turma_update' turma.id %}" class="btn btn-sm btn-outline-primary">Editar</a>
                  <form action="{% url 'turma_delete' turma.id %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-sm btn-outline-danger">Excluir</button>
                  </form>
                </div>
              </td>
            </tr>
          {% empty %}
            <tr>
              <td colspan="5" class="text-center py-4 text-muted">Nenhuma turma cadastrada.</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}